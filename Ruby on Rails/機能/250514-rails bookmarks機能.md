### bookmarks機能

------



### 個人的なコードポイント

------

#### コントローラーとモデルの使い分け

　ブックマーク機能の更新や編集のデータ操作をコントローラーのみでなく、モデルでも行う点について疑問があったので

コントローラー　：　データの**受け渡し**、**流れの制御**がメインの役割　

ex ) フォームから値を受け取る、保存に成功したらリダイレクト、失敗したら再表示など

モデル　：　ビジネスロジック（**データの操作**）がメインの役割

ex) タグの分割・重複排除・関連付けなど、データの具体的な操作やルール

＊コントローラーが複雑にならないようにデータ操作はモデルにまとめるのが rails の設計思想

＊モデルに関してもブックマーク機能のデータ操作はブックマークモデルでなく、あくまでもその**操作を行う親モデル**であるUserモデルで行う必要がある。

#### 中間テーブルの関連を記す順番

```ruby
has_many :post_tags, dependent: :destroy
has_many :tags, through: :post_tags
```

　必ず、この順番で記さなくてはならない。（through が前に来るとNG!）
rails は関連付けを上から順番に解釈していくので、「定義されてないわそれ」ってエラーを起こす。





